<div class="custome-background-all">
  {{> company-sidenav-customize settings=true}}
  <div class="main-content pl-5" id="panel">

    <!-- Page content -->
    <div class="header bg-primary pb-6">
      <div class="container-fluid">
        <div class="header-body">
          <div class="row align-items-center py-4">
            <div class="col-lg-6 col-7">
              <nav aria-label="breadcrumb" class="d-none d-md-inline-block ml-md-4">
                <ol class="breadcrumb breadcrumb-links breadcrumb-dark">
                  <li class="breadcrumb-item"><a href="#"><i class="fas fa-home"></i></a></li>
                  <li class="breadcrumb-item"><a href="#">Company</a></li>
                  <li class="breadcrumb-item active" aria-current="page">Settings</li>
                </ol>
              </nav>
            </div>
          </div>
           <!-- Card stats -->
           <div class="row">
            <div class="col-xl-3 col-md-6">
              <div class="card card-stats">
                <!-- Card body -->
                <div class="card-body m-hover" data-toggle="modal" onclick="$('#update-online-payment').modal()">
                  <div class="row">
                    <div class="col">
                      <h5 class="card-title text-uppercase text-muted mb-0">
                        Payment
                      </h5>
                      <span class="h2 font-weight-bold mb-0">{{#if settings.isOnlinePayment}}Online{{else}}Offline{{/if}}</span>
                    </div>
                    <div class="col-auto">
                      <div
                        class="
                          icon icon-shape
                          bg-gradient-orange
                          text-white
                          rounded-circle
                          shadow
                        "
                      >
                        <i class="ni ni-money-coins"></i>
                      </div>
                    </div>
                  </div>
                  <p class="mt-3 mb-0 text-sm">
                    <span class="text-orange mr-2"
                      ><i class="ni ni-money-coins mr-2"></i>Click to update</span
                    >
                  </p>
                </div>
              </div>
            </div>
            <div class="col-xl-3 col-md-6">
              <div class="card card-stats">
                <!-- Card body -->
                <div class="card-body m-hover" data-toggle="modal" onclick="$('#update-interest').modal()">
                  <div class="row">
                    <div class="col">
                      <h5 class="card-title text-uppercase text-muted mb-0">
                        Interest
                      </h5>
                      <span class="h2 font-weight-bold mb-0">{{settings.interest}}%</span>
                    </div>
                    <div class="col-auto">
                      <div
                        class="
                          icon icon-shape
                          bg-gradient-orange
                          text-white
                          rounded-circle
                          shadow
                        "
                      >
                        <i class="ni ni-money-coins"></i>
                      </div>
                    </div>
                  </div>
                  <p class="mt-3 mb-0 text-sm">
                    <span class="text-orange mr-2"
                      ><i class="ni ni-money-coins mr-2"></i>Click to update</span
                    >
                  </p>
                </div>
              </div>
            </div>
            <div class="col-xl-3 col-md-6">
              <div class="card card-stats">
                <!-- Card body -->
                <div class="card-body m-hover" data-toggle="modal" onclick="$('#update-logo').modal()">
                  <div class="row">
                    <div class="col">
                      <h5 class="card-title text-uppercase text-muted mb-0">
                        Company logo
                      </h5>
                      <span class="h2 font-weight-bold mb-0"></span>
                 
                    </div>
                    <div class="col-auto">
                      <div>
                        <!-- <i class="ni ni-money-coins"></i> -->
                        <img src="{{settings.company_logo}}" class="img-fluid rounded-circle" style="width: 50px;height: 50px;" />
                      </div>
                    </div>
                  </div>
                  <p class="mt-3 mb-0 text-sm">
                    <span class="text-orange mr-2"
                      ><i class="ni ni-money-coins mr-2"></i>Click to update</span
                    >
                  </p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  
    <!-- Page content -->
    <div class="container-fluid mt--6">
      <div class="row" id="active-users-tab">
         <!-- CAPITAL -->
         <div class="col-xl-2">
          <div class="card">
            <div class="card-header border-0">
              <div class="row align-items-center">
                <div class="col mb-2">
                  <h3 class="mb-0">Capital range</h3>
                </div>
                <div class="col-sm-4 text-right">
                  <div class="col">
                    <button class="btn btn-primary rounded-circle text-white p-2" type="button" data-toggle="modal" data-target="#add-capital"><i class="ni ni-fat-add"></i></button>
                  </div>
                </div>
              </div>
            </div>
            <div class="table-responsive">
              <!-- Projects table -->
              <table class="table align-items-center table-hover display" id="staff_sortable">
                <thead class="thead-light">
                  <tr>
                    <th scope="col">Name</th>
                  </tr>
                </thead>
                <tbody>
                  {{#each capital}}
                    <tr class="m-hover" data-toggle="modal" onclick="$('#{{this._id}}-update-capital').modal()">
                      <th scope="row">
                        {{comma this.value}}
                      </th>
                    </tr>
                  {{/each}}
                </tbody>
              </table>
            </div>
          </div>
        </div>
        <!--BRANCH-->
        <div class="col-xl-5">
          <div class="card">
            <div class="card-header border-0">
              <div class="row align-items-center">
                <div class="col mb-2">
                  <h3 class="mb-0">Branch</h3>
                </div>
                <div class="col-sm-4 text-right">
                  <div class="col">
                    <button class="btn btn-primary rounded-circle p-2" type="button"  data-toggle="modal" data-target="#add-branch"><i class="ni ni-fat-add"></i></button>
                  </div>
                </div>
              </div>
            </div>
            <div class="table-responsive">
              <!-- Projects table -->
              <table class="table align-items-center table-flush table-hover">
                <thead class="thead-light">
                  <tr>
                    <th scope="col">Name</th>
                    <th scope="col">Address</th>
                    <th scope="col">Staff</th>
                  </tr>
                </thead>
                <tbody>
                  {{#each branches}}
                    <tr class="m-hover" data-toggle="modal" onclick="$('#{{this._id}}-update-branch').modal()">
                      <th scope="row">
                        {{this.name}}
                      </th>
                      <td>
                        {{this.barangay}}, {{this.city}}. {{this.province}}
                      </td>
                      <td>
                        {{this.count_staff}}
                      </td>
                    </tr>
                  {{/each}}
                </tbody>
              </table>
            </div>
          </div>
        </div>
        <!--STAFF-->
        <div class="col-xl-5">
          <div class="card">
            <div class="card-header border-0">
              <div class="row align-items-center">
                <div class="col mb-2">
                  <h3 class="mb-0">Staff</h3>
                </div>
                <div class="col-sm-4 text-right">
                  <div class="col">
                    <button class="btn btn-primary rounded-circle p-2" type="button"  data-toggle="modal" data-target="#add-staff"><i class="ni ni-fat-add"></i></button>
                  </div>
                </div>
              </div>
            </div>
            <div class="table-responsive">
              <!-- Projects table -->
              <table class="table align-items-center table-flush table-hover">
                <thead class="thead-light">
                  <tr>
                    <th scope="col">Name</th>
                    <th scope="col">Branch</th>
                    <!-- <th scope="col">Collector</th> -->
                    <th scope="col">Status</th>
                  </tr>
                </thead>
                <tbody>
                <tbody>
                  {{#each staffs}}
                  {{#each ../staffs_info}}
                    {{#ifStatement this._id ../this.staff_id}}
                    <tr class="m-hover" data-toggle="modal" onclick="$('#{{../this._id}}-update-staff').modal()">
                      <th scope="row">
                        {{toUpper this.firstname}} {{middleInitials this.middlename}} {{toUpper this.lastname}}
                      </th>
                      <td>
                        {{#each ../../branches}}
                          {{#ifStatement this._id ../../this.branch_id}}
                            {{this.name}}
                          {{/ifStatement}}
                        {{/each}}
                      </td>
                      <!-- <td>
                        {{../this.count_collector}}
                      </td> -->
                      <td class="fw-bold {{#if this.isHired}}text-success{{else}}{{#if ../this.isCancel}}text-danger{{else}}text-primary{{/if}}{{/if}}">
                        {{#if this.isHired}}Accepted{{else}}{{#if ../this.isCancel}}Declined{{else}}Pending{{/if}}{{/if}}
                      </td>
                    </tr>
                    {{/ifStatement}}
                  {{/each}}
                {{/each}}
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </div>
      <!-- Footer -->
      <footer class="footer pt-0">
        <div class="row align-items-center justify-content-lg-between">
          <div class="col-lg-6">
            <div class="copyright text-center  text-lg-left  text-muted">
              &copy; 2021 <a href="https://www.creative-tim.com" class="font-weight-bold ml-1" target="_blank">Start-up</a>
            </div>
          </div>
        </div>
      </footer>
    </div>
  </div>  
</div>

<!-- MODAL ADD COMPANY -->
<div class="modal fade" id="add-company" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Add Company</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body pb-0 pt-0">
        <input name="code" type="text" class="form-control mb-2" placeholder="Code">
        <span class="f-12 f-gray">input company code</span>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary">Add</button>
      </div>
    </div>
  </div>
</div>
<!-- Modal ADD BRANCH-->
<div class="modal fade bd-example-modal-lg" id="add-branch" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="myLargeModalLabel">Add Branch</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <form action="/company/settings/add-branch" method="POST">
        <div class="modal-body pb-0 pt-0">
            <div class="row">
              <div class="col-sm-12">
                <span class="f-15 f-gray-d ml-1">Branch name</span>
                  <input name="name" type="text" class="form-control mb-2 mt-1">
              </div>
              <div class="col-sm-12 m-0">
                <div class="form-group m-0 mb-2">
                  <label class="f-15 f-gray-d ml-1" for="input-country">Region</label>
                  <input type="text" class="form-control" placeholder="Select Region" name="region_name" required
                    id="region_name" hidden />
                  <br />
                  <select name="region" class="form-control" id="region" required></select>
                </div>
              </div>
              <div class="col-sm-12 m-0">
                <div class="form-group m-0 mb-2">
                  <label class="f-15 f-gray-d ml-1" for="input-country">Province</label>
                  <input type="text" class="form-control" placeholder="Select Province" name="province_name" required
                    id="province_name" hidden />
                  <br />
                  <select name="province" class="form-control" id="province" required></select>
                </div>
              </div>
              <div class="col-sm-12 m-0">
                <div class="form-group m-0 mb-2">
                  <label class="f-15 f-gray-d ml-1" for="input-city">City</label>
                  <input type="text" class="form-control" placeholder="Select City" name="city_name" required
                    id="city_name" hidden />
                  <br />
                  <select name="city" class="form-control" id="city" required></select>
                </div>
              </div>
              <div class="col-sm-12 m-0">
                <div class="form-group m-0 mb-2">
                  <label class="f-15 f-gray-d ml-1" for="input-city">Barangay</label>
                  <input type="text" class="form-control" placeholder="Select Barangay" name="barangay_name" required
                    id="barangay_name" hidden />
                  <br />
                  <select name="barangay" class="form-control" id="barangay" required></select>
                </div>
              </div>
            </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
          <button type="submit" class="btn btn-primary">Submit</button>
        </div>
    </form>
    </div>
  </div>
</div>
 <!-- Modal UPDATE BRANCH-->
{{#each branches}}
<div class="modal fade bd-example-modal-lg" id="{{this._id}}-update-branch" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-xl">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="myLargeModalLabel">Update Branch</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <form id="{{this._id}}" action="/company/settings/update-branch" method="POST">
        <div class="modal-body pb-0 pt-0">
            <input name="_id" type="text" class="form-control mb-2 mt-1" value="{{this._id}}" required hidden>
            <div class="row">
              <div class="col-sm-12">
                <span class="f-15 f-gray-d ml-1">Branch name</span>
                  <input name="name" type="text" class="form-control mb-2 mt-1" value="{{this.name}}" required readonly="readonly">
              </div>
              <!-- <div class="col-sm-12">
                <div class="row">
                  <div class="col-lg-3">
                    <div class="form-group">
                      <label class="form-control-label" for="input-country">Region</label>
                      <input name="region"  type="text" class="form-control" value="{{this.region}}" id="regionNameU" required readonly="readonly">
                      <input type="text" class="form-control" placeholder="Select Region"
                        id="region_nameU"  hidden/>
                      <br />
                      <select class="form-control" id="regionU" ></select>
                    </div>
                  </div>
                  <div class="col-lg-3">
                    <div class="form-group">
                      <label class="form-control-label" for="input-country">Province</label>
                      <input name="province" type="text" class="form-control" value="{{this.province}}" id="provinceNameU" required readonly="readonly">
                      <input type="text" class="form-control" placeholder="Select Province"
                        id="province_nameU" hidden />
                      <br />
                      <select class="form-control" id="provinceU"></select>
                    </div>
                  </div>
                  <div class="col-lg-3">
                    <div class="form-group">
                      <label class="form-control-label" for="input-city">City</label>
                      <input name="city" type="text" class="form-control" value="{{this.city}}" id="cityNameU" required readonly="readonly">
                      <input type="text" class="form-control" placeholder="Select City"
                        id="city_nameU" hidden />
                      <br />
                      <select class="form-control" id="cityU"></select>
                    </div>
                  </div>
                  <div class="col-lg-3">
                    <div class="form-group">
                      <label class="form-control-label" for="input-city">Barangay</label>
                      <input name="barangay"  type="text" class="form-control" value="{{this.barangay}}" id="barangayNameU" required readonly="readonly">
                      <input type="text" class="form-control" placeholder="Select Barangay" 
                        id="barangay_nameU" hidden />
                      <br />
                      <select class="form-control" id="barangayU"></select>
                    </div>
                  </div>
                </div>
              </div> -->
            </div>
        </div>
        <div class="modal-footer">
          {{#ifGreater count_staff}}
          <input type="text" name="isVoid" id="input{{this._id}}" value="{{this.isVoid}}" hidden required/>
					<input type="button" class="btn btn-danger" data-dismiss="modal" onclick="$('#input{{this._id}}').val('true');Swal.fire({title: 'Do you want to delete this branch?',showDenyButton: false,showCancelButton: true,icon: 'warning',confirmButtonText: 'Delete',confirmButtonColor: '#d33',}).then((result) => {if (result.isConfirmed) {$('#input{{this._id}}').val('true'); $('#submit{{this._id}}').trigger('click');} else {$('#input{{this._id}}').val('false');}})" value="Delete"/>
          {{/ifGreater}}
          <button type="submit" class="btn btn-primary" id="submit{{this._id}}" hidden>Submit</button>
        </div>
      </form>
    </div>
  </div>
</div>
{{/each}}
<!-- Modal ADD STAFF-->
<div class="modal fade bd-example-modal-lg" id="add-staff" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="myLargeModalLabel">Add Staff</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <form action="/company/settings/add-staff" method="POST">
        <div class="modal-body pb-0 pt-0">
            <div class="row">
              <div class="col-sm-12">
                <span class="f-15 f-gray-d ml-1">Email</span>
                  <input name="email" type="text" class="form-control mb-2 mt-1" required pattern=".+@gmail.com">
              </div>
              <div class="col-sm-12">
                <span class="f-15 f-gray-d ml-1">Select Branch</span>
                <select name="branch_id" class="custom-select" required>
                  <option value="" selected> </option>
                  {{#each branches}}
                  <option value="{{this._id}}">{{this.name}}</option>
                  {{/each}}
                </select>
              </div>
            </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
          <button type="submit" class="btn btn-primary">Submit</button>
        </div>
    </form>
    </div>
  </div>
</div>
 <!-- Modal UPDATE STAFF-->
 {{#each staffs}}
  {{#each ../staffs_info}}
    {{#ifStatement this._id ../this.staff_id}}
    <div class="modal fade bd-example-modal-lg" id="{{../this._id}}-update-staff" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel" aria-hidden="true">
      <div class="modal-dialog modal-lg">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="myLargeModalLabel">Update staff</h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <form id="{{../this._id}}" action="/company/settings/update-staff" method="POST">
            <div class="modal-body pb-0 pt-0">
            <input name="_id" type="text" class="form-control mb-2 mt-1" value="{{../this._id}}" required hidden>
            <input name="user_id" type="text" class="form-control mb-2 mt-1" value="{{this._id}}" required hidden>
                <div class="row">
                  <div class="col-sm-6">
                    <span class="f-15 f-gray-d ml-1">Full name</span>
                    <input type="text" class="form-control mb-2 mt-1" value="{{toUpper this.firstname}} {{middleInitials this.middlename}} {{toUpper this.lastname}}" disabled>
                  </div>
                  <div class="col-sm-6">
                    <span class="f-15 f-gray-d ml-1">Email</span>
                    <input type="text" class="form-control mb-2 mt-1" value="{{this.email}}" disabled>
                  </div>
                  <div class="col-sm-6">
                    <span class="f-15 f-gray-d ml-1">Address</span>
                    <input type="text" class="form-control mb-2 mt-1" value="{{toUpper this.address}}" disabled>
                  </div>
                  <div class="col-sm-6">
                    <span class="f-15 f-gray-d ml-1">Contact number</span>
                    <input type="text" class="form-control mb-2 mt-1" value="{{this.phone_number}}" disabled>
                  </div>
                  <div class="col-sm-6">
                    <span class="f-15 f-gray-d ml-1">Status</span>
                    <input type="text" class="form-control mb-2 mt-1 {{#if this.isHired}}text-success{{else}}{{#if ../this.isCancel}}text-danger{{else}}text-primary{{/if}}{{/if}} text-bold fw-bold" value="{{#if this.isHired}}Accepted{{else}}{{#if ../this.isCancel}}Declined{{else}}Pending{{/if}}{{/if}}" disabled>
                  </div>
                  <div class="col-sm-6">
                    <span class="f-15 f-gray-d ml-1">Branch</span>
                    <input name="old_branch" type="text" value="{{#each ../../branches}}{{#ifStatement this._id ../../this.branch_id}}{{this._id}}{{/ifStatement}}{{/each}}" hidden>
                    <select name="branch_id" class="custom-select" required>
                      <option value="{{#each ../../branches}}{{#ifStatement this._id ../../this.branch_id}}{{this._id}}{{/ifStatement}}{{/each}}" selected hidden>{{#each ../../branches}}{{#ifStatement this._id ../../this.branch_id}}{{this.name}}{{/ifStatement}}{{/each}}</option>
                      {{#each ../../branches}}
                      <option value="{{this._id}}">{{this.name}}</option>
                      {{/each}}
                    </select>
                  </div>
                </div>
            </div>
            <div class="modal-footer">
              {{#checkBalance ../this.count_collector 0}}
              <input type="text" name="isVoid" id="input{{#ifStatement this._id ../this.staff_id}}{{../this._id}}{{/ifStatement}}" value="{{../this.isVoid}}" required hidden/>
              <input type="button" class="btn btn-danger" data-dismiss="modal" onclick="$('#input{{#ifStatement this._id ../this.staff_id}}{{../this._id}}{{/ifStatement}}').val('true');Swal.fire({title: 'Do you want to delete this Staff?',showDenyButton: false,showCancelButton: true,icon: 'warning',confirmButtonText: 'Delete',confirmButtonColor: '#d33',}).then((result) => {if (result.isConfirmed) {$('#submit{{#ifStatement this._id ../this.staff_id}}{{../this._id}}{{/ifStatement}}').trigger('click');} else {$('#input{{#ifStatement this._id ../this.staff_id}}{{../this._id}}{{/ifStatement}}').val('false');}})" value="Delete"/>
              {{/checkBalance}}
              <button type="submit" class="btn btn-primary" id="submit{{#ifStatement this._id ../this.staff_id}}{{../this._id}}{{/ifStatement}}">Submit</button>
            </div>
          </form>
        </div>
      </div>
    </div>
    {{/ifStatement}}
  {{/each}}
{{/each}}
<!-- Modal ADD CAPITAL-->
<div class="modal fade bd-example-modal-lg" id="add-capital" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="myLargeModalLabel">Add Capital</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <form action="/company/settings/add-capital" method="POST">
        <div class="modal-body pb-0 pt-0">
            <div class="row">
              <div class="col-sm-12">
                <span class="f-15 f-gray-d ml-1">Value</span>
                  <input name="value" type="number" class="form-control mb-2 mt-1" required>
              </div>
            </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
          <button type="submit" class="btn btn-primary">Submit</button>
        </div>
    </form>
    </div>
  </div>
</div>
<!-- Modal UPDATE CAPITAL-->
{{#each capital}}
<div class="modal fade bd-example-modal-lg" id="{{this._id}}-update-capital" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="myLargeModalLabel">Update Capital</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <form id="{{this._id}}" action="/company/settings/update-capital" method="POST">
        <input name="_id" type="text" class="form-control mb-2 mt-1" value="{{this._id}}" hidden>
        <div class="modal-body pb-0 pt-0">
            <div class="row">
              <div class="col-sm-12">
                <span class="f-15 f-gray-d ml-1">Value</span>
                  <input name="value" type="number" class="form-control mb-2 mt-1" value="{{this.value}}" required>
              </div>
            </div>
        </div>
        <div class="modal-footer">
          <input type="text" name="isVoid" id="input{{this._id}}" value="{{this.isVoid}}" required hidden/>
          <input type="button" class="btn btn-danger" data-dismiss="modal" onclick="$('#input{{this._id}}').val('true');Swal.fire({title: 'Do you want to delete this capital?',showDenyButton: false,showCancelButton: true,icon: 'warning',confirmButtonText: 'Delete',confirmButtonColor: '#d33',}).then((result) => {if (result.isConfirmed) {$('#submit{{this._id}}').trigger('click');} else {$('#input{{this._id}}').val('false');}})" value="Delete"/>
          <button type="submit" class="btn btn-primary" id="submit{{this._id}}">Submit</button>
        </div>
    </form>
    </div>
  </div>
</div>
{{/each}}

<!-- Modal UPDATE ONLINE PAYMENT-->
<div class="modal fade bd-example-modal-lg" id="update-online-payment" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="myLargeModalLabel">Update Payment</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <form action="/company/settings/update-payment" method="POST">
        <input name="_id" type="text" class="form-control mb-2 mt-1" value="{{settings._id}}" hidden required>
        <div class="modal-body pb-0 pt-0">
            <div class="row">
              <div class="col-sm-12">
                  <span class="f-14 f-gray-d ml-1">Gcash number</span>
                  <input name="gcash_number" type="number" class="form-control mb-3 mt-1" value="{{settings.gcash_number}}" required>
                  <span class="f-15 f-gray-d ml-1">Type</span>
                  <select name="isOnlinePayment" class="form-control mt-1" required>
                    <option value="{{settings.isOnlinePayment}}" selected hidden>{{#if settings.isOnlinePayment}}Online{{else}}Offline{{/if}}</option>
                    <option value="true">Online</option>
                    <option value="false">Offline</option>
                  </select>
              </div>
            </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
          <button type="submit" class="btn btn-primary">Submit</button>
        </div>
    </form>
    </div>
  </div>
</div>

<!-- Modal UPDATE INTEREST -->
<div class="modal fade bd-example-modal-lg" id="update-interest" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="myLargeModalLabel">Update Interest</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <form action="/company/settings/update-interest" method="POST">
        <input name="_id" type="text" class="form-control mb-2 mt-1" value="{{settings._id}}" hidden required>
        <div class="modal-body pb-0 pt-0">
            <div class="row">
              <div class="col-sm-12">
                  <input name="interest" type="text" value="{{settings.interest}}" class="form-control">
              </div>
            </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
          <button type="submit" class="btn btn-primary">Submit</button>
        </div>
    </form>
    </div>
  </div>
</div>

<!-- Modal UPDATE LOGO -->
<div class="modal fade bd-example-modal-lg" id="update-logo" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="myLargeModalLabel">Change logo</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <form action="/company/settings/update-logo" method="POST"  enctype="multipart/form-data">
        <div class="modal-body pb-0 pt-0">
          <center>
            <img
              class="img-fluid"
              id="imageResult"
              src="{{settings.company_logo}}"
              class="rounded-circle"
            />
          </center>
          <input
              id="upload"
              name="image"
              type="file"
              accept=".jpg,.jpeg"
              onchange="readURL(this);"
              class="form-control border-0"
              required
          />
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
          <button type="submit" id="submit" class="btn btn-primary">Submit</button>
        </div>
    </form>
    </div>
  </div>
</div>
<!--END OF MODAL -->

<!-- UPLAOD Image -->
<script>
  /*  ==========================================
    SHOW UPLOADED IMAGE
* ========================================== */
  function readURL(input) {
    if (input.files && input.files[0]) {
      var reader = new FileReader();

      reader.onload = function (e) {
        $("#imageResult").attr("src", e.target.result);
        $("#imgdatainput").val(e.target.result);
        $("#saveBtn").prop("disabled", false);
        $("#saveBtn").prop("hidden", false);
      };
      reader.readAsDataURL(input.files[0]);
    }
  }

  $(function () {
    $("#upload").on("change", function () {
      readURL(input);
    });
  });

  /*  ==========================================
    SHOW UPLOADED IMAGE NAME
* ========================================== */
  var input = document.getElementById("upload");
  var infoArea = document.getElementById("upload-label");

  input.addEventListener("change", showFileName);
  function showFileName(event) {
    var input = event.srcElement;
    var fileName = input.files[0].name;
    infoArea.textContent = "File name: " + fileName;
  }

  $("form").submit(function () {
    $(this).find("button[type=submit]").prop("disabled", true);
    $(this).find("button[type=submit]").text("Loading ...");
  });
</script>

<script>
  jQuery(document).ready(function($) {
    $(".clickable-row").click(function() {
        window.location = $(this).data("href");
    });
  });
</script>

<script>
  $(document).ready( function () {
    $('#staff_sortable').DataTable({
      paging: false,
      searching: false
    });
} );
</script>
<!-- Branch add Address -->
<script type="text/javascript">
  var my_handlers = {
    fill_provinces: function () {
      var region_code = $(this).val();
      $('#region_name').val($(this).find(':selected').text());
      $('#province').ph_locations('fetch_list', [{ region_code: region_code }]);
    },

    fill_cities: function () {
      var province_code = $(this).val();
      $('#province_name').val($(this).find(':selected').text());
      $('#city').ph_locations('fetch_list', [{ province_code: province_code }]);
    },

    fill_barangays: function () {
      var city_code = $(this).val();
      $('#city_name').val($(this).find(':selected').text());
      $('#barangay').ph_locations('fetch_list', [{ city_code: city_code }]);
    },
    set_barangays: function () {
      var city_code = $(this).val();
      $('#barangay_name').val($(this).find(':selected').text());
    },
  };

  $(function () {
    $('#region').on('change', my_handlers.fill_provinces);
    $('#province').on('change', my_handlers.fill_cities);
    $('#city').on('change', my_handlers.fill_barangays);
    $('#barangay').on('change', my_handlers.set_barangays);

    $('#region').ph_locations({ location_type: 'regions' });
    $('#province').ph_locations({ location_type: 'provinces' });
    $('#city').ph_locations({ location_type: 'cities' });
    $('#barangay').ph_locations({ location_type: 'barangays' });

    $('#region').ph_locations('fetch_list');
  });
</script>
